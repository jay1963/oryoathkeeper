[
  {
    "id": "well-known",
    "match": {
      "url": "http://.well-known/acme-challenge",
      "methods": ["GET"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "mattex-api",
    "match": {
      "url": "http://dev-api.mattex.com.hk/<.*>",
      "methods": ["GET"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "mattex-identify-rule",
    "match": {
      "url": "http://dev-api.mattex.com.hk/login<.*>",
      "methods": ["POST"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "mattex-mmm-api-rule",
    "match": {
      "url": "http://dev-api.mattex.com.hk/mmm/<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{
      "handler": "jwt"
    }],
    "authorizer": { "handler": "allow" },
    "mutator": {
      "handler": "cookie",
      "config": {
        "cookies": {
          "X-User": "{{ print .Subject }}",
          "X-Extra": "{{ print .Extra }}"
        }
      }
    }
  },
  {
    "id": "mattex-marketplace-api-rule",
    "match": {
      "url": "http://dev-api.mattex.com.hk/marketplace/<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{
      "handler": "jwt"
    }],
    "authorizer": { "handler": "allow" },
    "mutator": {
      "handler": "cookie",
      "config": {
        "cookies": {
          "X-User": "{{ print .Subject }}",
          "X-Extra": "{{ print .Extra }}"
        }
      }
    }
  },
  {
    "id": "oathkeeper-api-rule",
    "match": {
      "url": "http://dev-api.mattex.com.hk/oathkeeper/<.*>",
      "methods": ["GET"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  }
]

