[
  {
    "id": "mattex-identify-login",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/login<.*>",
      "methods": ["POST", "OPTIONS"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "mattex-identify-account",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/account/<.*>",
      "methods": ["POST", "GET", "OPTIONS"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "mattex-identify-api-rule",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/api/v1/<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{
      "handler": "jwt"
    }],
    "authorizer": { "handler": "allow" },
    "mutator": {
      "handler": "cookie",
      "config": {
        "cookies": {
          "user": "{{ print .Subject }}",
          "user_id": "{{ print .Extra.uid }}",
          "domain": "{{ print .Extra.domain }}"
        }
      }
    }
  },
  {
    "id": "mattex-tms-gateway-rule",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/tms/<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "operation-mattex-tms-rule",
    "match": {
      "url": "<https|http>://dev-tms.operation.mattex.com.hk<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "dev-operation-api-mattex-rule",
    "match": {
      "url": "<https|http>://dev-api.operation.mattex.com.hk<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "mattex-mmm-api-rule",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/mmm/<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{
      "handler": "jwt"
    }],
    "authorizer": { "handler": "allow" },
    "mutator": {
      "handler": "cookie",
      "config": {
        "cookies": {
          "user": "{{ print .Subject }}",
          "user_id": "{{ print .Extra.uid }}",
          "domain": "{{ print .Extra.domain }}"
        }
      }
    }
  },
  {
    "id": "mattex-supplier-api-rule",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/supplier/<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{
      "handler": "jwt"
    }],
    "authorizer": { "handler": "allow" },
    "mutator": {
      "handler": "cookie",
      "config": {
        "cookies": {
          "user": "{{ print .Subject }}",
          "user_id": "{{ print .Extra.uid }}",
          "domain": "{{ print .Extra.domain }}"
        }
      }
    }
  },
  {
    "id": "dev-auth-api-rule",
    "match": {
      "url": "<https|http>://dev-api.auth.mattex.com.hk<.*>",
      "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  },
  {
    "id": "oathkeeper-api-rule",
    "match": {
      "url": "<https|http>://dev-api.mattex.com.hk/oathkeeper/<.*>",
      "methods": ["GET"]
    },
    "authenticators": [{ "handler": "anonymous" }],
    "authorizer": { "handler": "allow" },
    "mutator": { "handler": "noop" }
  }
]

